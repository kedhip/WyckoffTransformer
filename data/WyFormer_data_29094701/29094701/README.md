# WyFormer generated datasets
The first folder in the dataset which was used for training WyFormer, using only train and validation parts. Then the folder structure corresponds to transformations of the data.
- [`mp_20/WyckoffTransformer`](mp_20/WyckoffTransformer) 10k formally valid Wyckoff representations generated by WyFormer trained on MP-20 dataset.
  - [`DiffCSP++10k`](mp_20/WyckoffTransformer/DiffCSP++10k/) 9999 structures obtained with DifCSP++; it failed for one Wyckoff representation, we consider this structure unstable. __Can be considered as the "official" WyFormer sample.__
    - [`CHGNet_free/DFT`](mp_20/WyckoffTransformer/DiffCSP++10k/CHGNet_free/DFT) CHGNet pre-relaxation followed by DFT relaxation; for some structures the DFT relaxation failed, we consider them unstable. The relaxation was obtained using MP-compatiable [`MPGGADoubleRelaxStaticMaker`](https://materialsproject.github.io/atomate2/reference/atomate2.vasp.flows.mp.MPGGADoubleRelaxStaticMaker.html). Note that material indices unfortunately got permuted at the CHGNet pre-relaxations step. Used in Table 1. __Can be considered as the "official" WyFormer DFT-relaxed sample.__
    - [`CHGNet_free/DFT-GGA-relax-1`](mp_20/WyckoffTransformer/DiffCSP++10k/CHGNet_free/DFT-GGA-relax-1/) same as above, but relaxed with a single invocation of `MPRelaxSet`. This is less precise, not strictly compatiable to Materials Project, but is the same as reported in FlowMM [paper](https://arxiv.org/pdf/2406.04713) and [code](https://github.com/facebookresearch/flowmm/blob/6a96aec3b6eba89f6fa07436f0c8837979abb285/scripts_analysis/dft_create_inputs.py#L43). Used in Table 1.
    - [`DiffCSP++`](mp_20/WyckoffTransformer/DiffCSP++/) 1k structures obtained with DifCSP++
      - [`DFT`](mp_20/WyckoffTransformer/DiffCSP++/DFT/) DFT relaxation of 105 _novel and unique_ structures, `MPGGADoubleRelaxStaticMaker`
    - [`CrySPR/CHGNet_fix`](mp_20/WyckoffTransformer/CrySPR/CHGNet_fix/) 1k structures obtained with CrySPR and CHGNet, _whith a constraint during the relaxation that maintained the Wyckoff positions_.
      - [`DFT`](mp_20/WyckoffTransformer/CrySPR/CHGNet_fix/DFT/) DFT relaxation of 105 _novel and unique_ structures, `MPGGADoubleRelaxStaticMaker`.
- [`mpts_52/WyckoffTransformer/CrySPR/CHGNet_fix`](mpts_52/WyckoffTransformer/CrySPR/CHGNet_fix) 1k structures generated with Wyformer trained on MPTS-52 dataset, then CrySPR and CHGNet, _whith a constraint during the relaxation that maintained the Wyckoff positions_.
# Format description
- `structure` - `pymatgen.core.structure.Structure`
- `group`, `species`, `numIons`, `sites` - arguments to [`pyxtal.from_random`](https://pyxtal.readthedocs.io/en/latest/pyxtal.html#pyxtal.pyxtal.from_random). For `*/WyckoffTransformer/data.csv.gz` they were generated with WyFormer, for the rest they were obtained from structures with [`pyxtal.from_seed`](https://pyxtal.readthedocs.io/en/latest/pyxtal.html#pyxtal.pyxtal.from_seed). Note the the indexing within those fields is by chemical element, not by Wyckoff position.
- `site_symmetries`, `elements`, `multiplicity`, `wyckoff_letters`, `sites_enumeration`, `dof` - information about the Wyckoff positions, indexed by Wyckoff position. The `dof` is the number of degrees of freedom for the Wyckoff position, i.e. the number of free parameters in the Wyckoff position. `sites_enumeration` enumerates the Wyckoff poistion with the same site symmetry, see the paper for details. For example, for space group `2` aka `P-1`, Wyckoff positiosn `a` has site symmetry `-1` and enumeration `0`, while `b` has site symmetry `-1` and enumeration `1`.
- `sites_enumeration_augmented` - possible variants of the enumeration, depend on the arbitray choice of the space group Euclidean normalizer, e. g. unit cell center. See the [preprint](https://arxiv.org/abs/2503.16784) for details.
- `smact_validity` - "Compositional Validity" computed with [SMACT](https://github.com/WMD-Group/SMACT). Not all strucures in MP-20 conform to this criterion.
- `structural_validity` - "Structural Validity" introduced by [CDVAE](https://arxiv.org/abs/2110.06197), whether any two atoms are closer than 0.5 Angstroms
- `cdvae_e` - energy predicted by the model included in CDVAE, used for EMD(E) distribution similarity metric
- `chgnet_energy_per_atom` - energy per atom from CHGNet relaxation
- `chgnet_e_above_hull_corrected` - energy above hull from CHGNet relaxation, taking into account MP energy correction
- `dft_e_uncorrected` - raw potential energy from DFT relaxation
- `dft_e_corrected` - potential energy from DFT relaxation, corrected with [`MaterialsProject2020Compatibility`](https://pymatgen.org/pymatgen.entries.html#pymatgen.entries.compatibility.MaterialsProject2020Compatibility)
 - `dft_e_above_hull_corrected` - energy above hull computed from DFT relaxation computed using `2023-02-07-ppd-mp.pkl.gz` distributed by [matbench-discovery](https://matbench-discovery.materialsproject.org/data) as reference.
- `entry` - [`pymatgen.entries.ComputedEntry`](https://pymatgen.org/pymatgen.entries.html#pymatgen.entries.computed_entries.ComputedEntry) containing the results of the DFT run.
